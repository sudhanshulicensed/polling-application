{"ast":null,"code":"import _regeneratorRuntime from \"/home/etech/Desktop/vue_assignment/poll application/poll-application/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/etech/Desktop/vue_assignment/poll application/poll-application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/home/etech/Desktop/vue_assignment/poll application/poll-application/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: \"LoginComponent\",\n  data: function data() {\n    return {\n      username: \"\",\n      password: \"\",\n      types: ['password']\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['getRole'])),\n  methods: _objectSpread(_objectSpread({}, mapActions(['callLogin'])), {}, {\n    handleLogin: function handleLogin() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var payLoad, responseLogin;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                payLoad = {\n                  username: _this.username,\n                  password: _this.password\n                };\n                console.log(_this.username, _this.password);\n                _context.next = 4;\n                return _this.callLogin(payLoad);\n\n              case 4:\n                responseLogin = _context.sent;\n                console.log(\"Response Login\", responseLogin);\n                localStorage.setItem('token', responseLogin[0].data.token);\n\n                if (responseLogin[1].role == \"admin\") {\n                  router.push('/createPoll');\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  })\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;EACAA,sBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC,QACA,UADA;IAHA;EAOA,CAVA;EAWAC,4BACAC,YACA,SADA,EADA,CAXA;EAgBAC,yCACAC,YACA,WADA,EADA;IAIAC,WAJA,yBAIA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC,OADA,GACA;kBACAR,wBADA;kBAEAC;gBAFA,CADA;gBAKAQ;gBALA;gBAAA,OAMA,wBANA;;cAAA;gBAMAC,aANA;gBAOAD;gBACAE;;gBACA;kBACAC;gBACA;;cAXA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYA;EAhBA;AAhBA","names":["name","data","username","password","types","computed","mapGetters","methods","mapActions","handleLogin","payLoad","console","responseLogin","localStorage","router"],"sourceRoot":"src/components","sources":["LogIn.vue"],"sourcesContent":["<template>\n    <div class=\"login-comp\">\n        <b-jumbotron header=\"LogIn\"></b-jumbotron>\n        <b-container fluid>\n            <b-row class=\"my-1 justify-content-center flex-column align-items-center row-gap\">\n                <b-row sm=\"12\">\n                    <b-col sm=\"3\">\n                      <label><code>Username</code>:</label>\n                    </b-col>\n                    <b-col sm=\"9\">\n                      <b-form-input v-model=\"username\">{{ username }}</b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row sm=\"12\">\n                    <b-col sm=\"3\">\n                      <label><code>Password</code>:</label>\n                    </b-col>\n                    <b-col sm=\"9\">\n                      <b-form-input :type=\"types[0]\" v-model=\"password\">{{ password }}</b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                  <b-col sm=\"3\"></b-col>\n                  <b-col sm=\"6 d-flex justify-content-end\">\n                    <b-button variant=\"info\" @click=\"handleLogin\">LogIn</b-button>\n                  </b-col>\n                </b-row>\n            </b-row>\n        </b-container>\n    </div>\n</template>\n\n<script>\nimport {mapGetters, mapActions } from 'vuex'\nexport default {\n    name: \"LoginComponent\",\n    data() {\n      return {\n        username: \"\",\n        password: \"\",\n        types: [\n          'password',\n        ]\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'getRole',\n      ])\n    },\n    methods: {\n      ...mapActions([\n        'callLogin'\n      ]),\n      async handleLogin(){\n        const payLoad = {\n          username : this.username,\n          password : this.password,\n        }\n        console.log(this.username, this.password)\n        const responseLogin = await this.callLogin(payLoad);\n        console.log(\"Response Login\", responseLogin);\n        localStorage.setItem('token', responseLogin[0].data.token);\n        if(responseLogin[1].role == \"admin\"){\n          router.push('/createPoll')\n        }\n      }\n    }\n}\n</script>\n\n<style scoped>\n  .row-gap{\n    row-gap: 10px;\n  }\n</style>"]},"metadata":{},"sourceType":"module"}